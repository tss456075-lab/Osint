<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OSINT Masterfile — Malachi Keane (Wakibrine) — Interactive Dossier</title>
  <style>
    :root{--bg:#071022;--panel:#081424;--muted:#98a0b3;--accent:#7c3aed}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#e6eef8;background:linear-gradient(180deg,#071129 0%,#021018 100%)}
    header{display:flex;align-items:center;gap:16px;padding:12px 20px;border-bottom:1px solid rgba(255,255,255,0.03)}
    .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#0ea5a9);display:flex;align-items:center;justify-content:center;font-weight:700}
    h1{font-size:16px;margin:0}
    .subtitle{color:var(--muted);font-size:13px}
    main{display:grid;grid-template-columns:340px 1fr 380px;gap:18px;padding:18px}
    .panel{background:var(--panel);border-radius:10px;padding:14px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .avatar{width:72px;height:72px;border-radius:8px;background:linear-gradient(180deg,#081424,#06101a);display:flex;align-items:center;justify-content:center;color:var(--muted)}
    .small{font-size:13px;color:var(--muted)}
    .link{color:#bfe4ff;text-decoration:none}
    .node-row{display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.02);margin-bottom:8px}
    #map{height:640px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}
    .gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:10px}
    .gallery img{width:100%;height:110px;object-fit:cover;border-radius:8px;background:#061024}
    pre{white-space:pre-wrap;color:#cfeaff;font-size:13px}
    .controls{display:flex;gap:8px}
    .search{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
    button{background:var(--accent);color:white;border:0;padding:8px 12px;border-radius:8px;cursor:pointer}
    .small-muted{font-size:12px;color:var(--muted)}
    @media (max-width:1100px){main{grid-template-columns:1fr;padding:12px} .right{order:3}}
  </style>
</head>
<body>
  <header>
    <div class="logo">OS</div>
    <div>
      <h1>OSINT Masterfile — Malachi Keane ("Wakibrine")</h1>
      <div class="subtitle">Interactive dossier — web tree, images, evidence and corroborations</div>
    </div>
    <div style="margin-left:auto;display:flex;align-items:center;gap:10px">
      <div class="small-muted">Snapshot: <strong id="snapshotDate"></strong></div>
      <div class="controls"><button id="exportJson">Export JSON</button><button id="downloadHtml">Download HTML</button></div>
    </div>
  </header>

  <main>
    <div class="panel left">
      <div style="display:flex;gap:12px;align-items:center">
        <div class="avatar" id="avatar">PHOTO</div>
        <div>
          <div style="font-weight:700" id="nameHeading">Malachi Israel Keane</div>
          <div class="small">Alias: <strong id="alias">Wakibrine</strong></div>
          <div class="small" style="margin-top:6px">Email: <strong id="email">wakibrine@gmail.com</strong></div>
        </div>
      </div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.02);margin:12px 0">

      <div class="small-muted">Platforms & hubs</div>
      <div id="platformList" style="margin-top:8px"></div>

      <div style="margin-top:12px" class="small-muted">Filings / addresses</div>
      <div id="filingsList" style="margin-top:8px"></div>

      <div style="margin-top:12px" class="small-muted">Known relatives (leads)</div>
      <div id="relativesList" style="margin-top:8px"></div>

      <div style="margin-top:12px"><input class="search" id="quickSearch" placeholder="Search name, platform, address..." /></div>
    </div>

    <div class="panel center">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div style="font-weight:700">Interactive Web Tree</div>
        <div class="small-muted">Click nodes to inspect — drag to rearrange</div>
      </div>

      <div id="map"></div>

      <div style="margin-top:12px;display:flex;gap:8px;align-items:center;justify-content:space-between">
        <div class="small-muted">Timeline / Key events</div>
        <div style="display:flex;gap:8px;align-items:center">
          <input id="profileUrls" class="search" placeholder="Paste profile URLs (comma-separated)" style="width:420px" />
          <button id="fetchProfiles">Load images</button>
        </div>
      </div>

      <div style="margin-top:8px" id="nodeDetail" class="small-muted">Select a node to view details here.</div>
    </div>

    <div class="panel right">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="font-weight:700">Evidence & raw links</div>
        <div class="small-muted">Click to open source</div>
      </div>

      <div id="evidence" style="margin-top:10px;max-height:360px;overflow:auto"></div>

      <div style="margin-top:12px;font-weight:700">Image Gallery (click to replace)</div>
      <div class="gallery" id="gallery"></div>

      <div style="margin-top:10px">
        <div style="font-weight:700">Raw JSON</div>
        <pre id="rawJson" style="max-height:180px;overflow:auto;background:rgba(0,0,0,0.12);padding:8px;border-radius:6px"></pre>
      </div>
    </div>
  </main>

  <script>
    document.getElementById('snapshotDate').innerText = new Date().toLocaleString();

    // --- FULL DATASET (all findings included) ---
    const dossier = {
      subject: {name: 'Malachi Israel Keane', alias: 'Wakibrine', email: 'wakibrine@gmail.com'},
      platforms: [
        {id:'twitch', label:'Twitch', url:'https://twitch.tv/wakibrine', notes:'Business Email listed on channel; ~16–17K followers'},
        {id:'linktree', label:'Linktree', url:'https://linktr.ee/wakibrine', notes:'Central hub linking platforms; lists email'},
        {id:'youtube', label:'YouTube', url:'https://youtube.com/@Wakibrine', notes:'Shorts & live archives; channel thumbnails match other profiles; ~100K subscribers (snapshot)'} ,
        {id:'instagram', label:'Instagram', url:'https://instagram.com/wakibrine', notes:'Profile bio includes name "Malachi Keane" and Linktree; reels tagged with locations'},
        {id:'x', label:'X / Twitter', url:'https://x.com/Wakibrine', notes:'Bio includes "Toronto, Ontario" and email; joined Jan 2025'},
        {id:'reddit', label:'Reddit', url:'https://reddit.com/u/Wakibrine', notes:'Profile text includes email and handle'},
        {id:'discord', label:'Discord (invite)', url:'https://discord.gg/wakibrine', notes:'Public invite — server "777" (~3.3k members)'}
      ],
      filings: [
        {id:'sunbiz', label:'SunBiz — FARUK ENTERPRISE LLC', url:'https://dos.myflorida.com/sunbiz', summary:'Authorized person listed: KEANE, MALACHI; principal address: 9951 SW 4TH ST, PLANTATION, FL 33324; Document L20000226587; annual reports 2023–2025; formation ~2020-07-29'}
      ],
      addresses: [
        {id:'addr1', label:'9951 SW 4th St, Plantation, FL 33324', notes:'Property aggregator pages list owners: Moulton W. Keane & Andrea Keane; parcel references in public sites'},
      ],
      academics: [ {label:'FAU Fall 2023 commencement program', url:'https://www.fau.edu/commencement', notes:'Name "Malachi Keane" appears in graduate list (public PDF)'} ],
      donations: [ {label:'Streamlabs tip page', url:'https://streamlabs.com/wakibrine', notes:'Donation landing page; merchant display name visible inside checkout popup (interactive)'} ],
      relatives: [ {label:'Andrea Keane', notes:'Listed at same address in public directories'}, {label:'Moulton W. Keane', notes:'Owner referenced in property history pages'} ],
      property_aggregators: [ {label:'Zillow / Realtor / Homes entries for 9951 SW 4th St', notes:'House details & transaction history; owner names listed in public aggregators'} ],
      other_hits: [ {label:'Name collisions', notes:'Other people named Malachi Keane found in UK police press and other contexts — do not conflate without corroboration'} ],
      confidence: {email:'very high', cross_platform:'very high', sunbiz_to_streamer:'moderate', deed_needed:'high'}
    };

    // Render left lists
    const platformList = document.getElementById('platformList');
    dossier.platforms.forEach(p => {
      const div = document.createElement('div'); div.className='node-row';
      div.innerHTML = '<div style="width:12px;height:12px;border-radius:6px;background:#7c3aed"></div><div style="flex:1"><strong>' + p.label + '</strong><div class="small-muted">' + p.url + '</div><div class="small">' + p.notes + '</div></div>';
      platformList.appendChild(div);
    });
    const filingsList = document.getElementById('filingsList');
    dossier.filings.forEach(f=>{ const div=document.createElement('div');div.className='node-row';div.innerHTML='<div style="width:12px;height:12px;border-radius:6px;background:#06b6d4"></div><div style="flex:1"><strong>' + f.label + '</strong><div class="small-muted">' + f.summary + '</div><div class="small"><a class="link" href="' + f.url + '" target="_blank">Source</a></div></div>'; filingsList.appendChild(div); });
    const relativesList = document.getElementById('relativesList');
    dossier.relatives.forEach(r=>{ const div=document.createElement('div');div.className='node-row';div.innerHTML='<div style="width:12px;height:12px;border-radius:6px;background:#f472b6"></div><div style="flex:1"><strong>' + r.label + '</strong><div class="small">' + r.notes + '</div></div>'; relativesList.appendChild(div); });

    // Render evidence panel
    const evidence = document.getElementById('evidence');
    function addEvidence(title, url, notes){ const el = document.createElement('div'); el.className='node-row'; el.innerHTML = '<div style="width:10px;height:10px;border-radius:6px;background:#60a5fa"></div><div style="flex:1"><strong><a class="link" href="' + url + '" target="_blank">' + title + '</a></strong><div class="small-muted">' + (notes || '') + '</div></div>'; evidence.appendChild(el); }
    dossier.platforms.forEach(p=> addEvidence(p.label, p.url, p.notes));
    dossier.filings.forEach(f=> addEvidence(f.label, f.url, f.summary));
    dossier.addresses.forEach(a=> addEvidence(a.label, 'https://www.google.com/maps/search/' + encodeURIComponent(a.label), a.notes));
    dossier.donations.forEach(d=> addEvidence(d.label, d.url, d.notes));
    dossier.academics.forEach(a=> addEvidence(a.label, a.url, a.notes));
    dossier.property_aggregators.forEach(pa=> addEvidence(pa.label, 'https://www.google.com/search?q=' + encodeURIComponent(pa.label), pa.notes));

    document.getElementById('rawJson').innerText = JSON.stringify(dossier, null, 2);

    // --- Interactive tree (SVG + lightweight force simulation) ---
    const svgNS = 'http://www.w3.org/2000/svg';
    const container = document.getElementById('map');
    const svg = document.createElementNS(svgNS,'svg'); svg.setAttribute('width','100%'); svg.setAttribute('height','100%'); svg.style.display='block'; container.appendChild(svg);

    // Build nodes and links from dossier
    const nodes = [];
    const links = [];
    function pushNode(id,label,type,meta){ nodes.push({id: id, label: label, type: type, meta: meta, x: Math.random()*800+50, y: Math.random()*300+50, vx:0, vy:0}); }

    pushNode('subject', dossier.subject.name, 'subject', {alias: dossier.subject.alias, email: dossier.subject.email});
    dossier.platforms.forEach(function(p){ pushNode('p_' + p.id, p.label, 'platform', p); });
    dossier.filings.forEach(function(f){ pushNode('f_' + (f.id || f.label), f.label, 'filing', f); });
    dossier.addresses.forEach(function(a){ pushNode('a_' + (a.id || a.label), a.label, 'address', a); });
    dossier.relatives.forEach(function(r){ pushNode('r_' + r.label.split(' ').join('_'), r.label, 'relative', r); });
    dossier.academics.forEach(function(ac,i){ pushNode('ac_' + i, ac.label, 'academic', ac); });
    dossier.donations.forEach(function(d,i){ pushNode('d_' + i, d.label, 'donation', d); });

    nodes.forEach(function(n){ if(n.id !== 'subject'){ links.push({source: 'subject', target: n.id}); } });

    // Create SVG elements for links and nodes
    const linkEls = [];
    const nodeEls = [];

    links.forEach(function(l){ var line = document.createElementNS(svgNS,'line'); line.setAttribute('stroke','rgba(255,255,255,0.06)'); line.setAttribute('stroke-width','1'); svg.appendChild(line); linkEls.push({el:line, data:l}); });

    nodes.forEach(function(n){
      var g = document.createElementNS(svgNS,'g'); g.setAttribute('cursor','pointer');
      var circle = document.createElementNS(svgNS,'circle'); circle.setAttribute('r', n.type === 'subject' ? 28 : 18); circle.setAttribute('fill', n.type === 'subject' ? '#7c3aed' : 'rgba(255,255,255,0.03)'); circle.setAttribute('stroke','rgba(255,255,255,0.06)');
      var text = document.createElementNS(svgNS,'text'); text.setAttribute('text-anchor','middle'); text.setAttribute('alignment-baseline','middle'); text.setAttribute('font-size','12'); text.setAttribute('fill', n.type === 'subject' ? '#fff' : '#cfeaff'); text.textContent = n.label;
      g.appendChild(circle); g.appendChild(text);
      svg.appendChild(g);
      nodeEls.push({g:g, circle:circle, text:text, data:n});

      // Drag behavior
      var dragging = false; var offsetX = 0; var offsetY = 0;
      g.addEventListener('mousedown', function(ev){ dragging = true; offsetX = ev.clientX - n.x; offsetY = ev.clientY - n.y; ev.preventDefault(); });
      window.addEventListener('mousemove', function(ev){ if(dragging){ n.x = ev.clientX - offsetX; n.y = ev.clientY - offsetY; n.vx = n.vy = 0; render(); } });
      window.addEventListener('mouseup', function(){ dragging = false; });

      // click shows detail
      g.addEventListener('click', function(ev){ ev.stopPropagation(); showNodeInfo(n); });
    });

    // Force simulation
    function simulate(){
      var k = 0.02;
      links.forEach(function(l){ var s = nodes.find(function(n){ return n.id === l.source; }); var t = nodes.find(function(n){ return n.id === l.target; }); var dx = t.x - s.x; var dy = t.y - s.y; var dist = Math.hypot(dx,dy) || 1; var desired = 150; var force = (dist - desired) * k; var fx = (dx/dist)*force; var fy = (dy/dist)*force; t.vx -= fx; t.vy -= fy; s.vx += fx; s.vy += fy; });
      for(var i=0;i<nodes.length;i++){ for(var j=i+1;j<nodes.length;j++){ var a = nodes[i], b = nodes[j]; var dx = b.x - a.x, dy = b.y - a.y; var d = Math.hypot(dx,dy) || 0.01; var min = 60; if(d < min){ var rep = (min - d) * 0.02; var rx = (dx/d) * rep; var ry = (dy/d) * rep; a.vx -= rx; a.vy -= ry; b.vx += rx; b.vy += ry; } } }
      nodes.forEach(function(n){ n.vx *= 0.85; n.vy *= 0.85; n.x += n.vx; n.y += n.vy; });
    }

    function render(){
      linkEls.forEach(function(le){ var s = nodes.find(function(n){ return n.id === le.data.source; }); var t = nodes.find(function(n){ return n.id === le.data.target; }); le.el.setAttribute('x1', s.x); le.el.setAttribute('y1', s.y); le.el.setAttribute('x2', t.x); le.el.setAttribute('y2', t.y); });
      nodeEls.forEach(function(ne){ ne.g.setAttribute('transform', 'translate(' + ne.data.x + ',' + ne.data.y + ')'); });
    }

    function tick(){ simulate(); render(); requestAnimationFrame(tick); }
    tick();

    // Node detail display & open link
    function showNodeInfo(n){
      var detail = document.getElementById('nodeDetail');
      var html = '<div style="font-weight:700">' + n.label + '</div><div class="small-muted" style="margin-top:6px">Type: ' + n.type + '</div>';
      if(n.meta){ html += '<div style="margin-top:8px"><pre>' + (n.meta.summary || n.meta.notes || '') + '</pre></div>'; if(n.meta.url) html += '<div style="margin-top:8px"><a class="link" target="_blank" href="' + n.meta.url + '">Open Source</a></div>'; }
      detail.innerHTML = html;
      if(n.meta && n.meta.url){ fetchOgImage(n.meta.url).then(function(img){ if(img){ setAvatar(img); addGalleryImage(img); } }); }
    }

    // small helpers: set avatar and add gallery images
    function setAvatar(url){ var av = document.getElementById('avatar'); av.style.backgroundImage = 'url(' + url + ')'; av.style.backgroundSize = 'cover'; av.textContent = ''; }
    function addGalleryImage(url){ var g = document.getElementById('gallery'); var img = document.createElement('img'); img.src = url; img.style.cursor = 'pointer'; img.addEventListener('click', function(){ var newUrl = prompt('Replace image with URL (blank to remove):', url); if(newUrl){ img.src = newUrl; } }); g.appendChild(img); }

    // OG image extraction (uses CORS proxy fallback)
    async function fetchOgImage(profileUrl){
      try{
        var oembedCandidates = [
          'https://www.youtube.com/oembed?url=' + encodeURIComponent(profileUrl) + '&format=json',
          'https://publish.twitter.com/oembed?url=' + encodeURIComponent(profileUrl) + '&format=json',
          'https://api.twitch.tv/v5/oembed?url=' + encodeURIComponent(profileUrl)
        ];
        for(var ii=0; ii < oembedCandidates.length; ii++){ try{ var r = await fetch(oembedCandidates[ii]); if(r.ok){ var j = await r.json(); if(j.thumbnail_url) return j.thumbnail_url; } }catch(e){} }
        var direct = await fetch(profileUrl).then(function(r){ return r.text(); }).catch(function(){ return null; });
        var og = extractOg(direct); if(og) return og;
        var proxy = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(profileUrl);
        var proxyHtml = await fetch(proxy).then(function(r){ return r.text(); }).catch(function(){ return null; });
        var og2 = extractOg(proxyHtml); if(og2) return og2;
      }catch(e){ console.warn('fetchOgImage error', e); }
      return null;
    }
    function extractOg(html){ if(!html) return null; try{ var doc = new DOMParser().parseFromString(html,'text/html'); var m = doc.querySelector('meta[property="og:image"]') || doc.querySelector('meta[name="og:image"]') || doc.querySelector('meta[name="twitter:image"]'); return m ? m.getAttribute('content') : null; }catch(e){ return null; } }

    // fetchProfiles button
    document.getElementById('fetchProfiles').addEventListener('click', async function(){
      var val = document.getElementById('profileUrls').value.trim(); if(!val){ alert('Paste one or more profile URLs separated by commas.'); return; }
      var urls = val.split(',').map(function(s){ return s.trim(); }).filter(Boolean);
      for(var i=0;i<urls.length;i++){ var img = await fetchOgImage(urls[i]); if(img) addGalleryImage(img); }
    });

    // quick search filter
    document.getElementById('quickSearch').addEventListener('input', function(e){ var q = e.target.value.toLowerCase(); nodeEls.forEach(function(ne){ var match = ne.data.label.toLowerCase().indexOf(q) !== -1 || JSON.stringify(ne.data.meta || {}).toLowerCase().indexOf(q) !== -1; ne.circle.setAttribute('opacity', match ? 1 : 0.25); ne.text.setAttribute('opacity', match ? 1 : 0.25); }); });

    // export & download
    document.getElementById('exportJson').addEventListener('click', function(){ var blob = new Blob([JSON.stringify(dossier,null,2)],{type:'application/json'}); var url = URL.createObjectURL(blob); var a = document.createElement('a'); a.href = url; a.download = 'malachi_dossier.json'; a.click(); });
    document.getElementById('downloadHtml').addEventListener('click', function(){ var html = '<!doctype html>' + document.documentElement.outerHTML; var blob = new Blob([html],{type:'text/html'}); var url = URL.createObjectURL(blob); var a = document.createElement('a'); a.href = url; a.download = 'Malachi_Keane_OSINT_Dossier.html'; a.click(); });

    // init: place some starting images (placeholders)
    addGalleryImage('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="600" height="400"><rect width="100%" height="100%" fill="#050a12"/><text x="50%" y="50%" font-size="20" fill="#8ea9c6" text-anchor="middle">Click nodes to load images from profiles</text></svg>');

    // Make evidence items clickable and interactive
    Array.from(document.querySelectorAll('#evidence a')).forEach(function(a){ a.addEventListener('click', function(){}); });

  </script>
</body>
</html>
